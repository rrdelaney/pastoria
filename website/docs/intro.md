---
sidebar_position: 1
---

# Get Started

**Pastoria is a full-stack JavaScript framework for building data-driven
applications that scale.** It combines [React Relay](https://relay.dev) with a
powerful filesystem-based router and server-side rendering to create an
end-to-end developer experience. Think of Pastoria like a GraphQL-supercharged
Next.js that focuses on data-intensive applications with a strong requirement
for consistency.

## Key Features

- **Filesystem-based routing**: Define routes by creating files in the
  `pastoria/` directory
- **Automatic query preloading**: GraphQL queries are preloaded on the server
  before rendering
- **Server-side rendering**: Pages are rendered on the server for optimal
  performance
- **Code splitting**: Components are automatically code-split for fast initial
  loads
- **Nested entry points**: Build complex layouts with independently-loaded
  nested components
- **Type safety**: Full TypeScript support with generated types for routes and
  queries
- **Bring your own schema**: Use any GraphQL schema library (Grats, Pothos,
  etc.)

## Creating a New Project

Creating a new Pastoria project is easy with the `create-pastoria` generator:

```bash
npm create pastoria my-app
cd my-app
```

The only system requirement is [Node.js](https://nodejs.org/en/download/)
version 20.0 or above.

## Project Structure

A typical Pastoria project looks like this:

```
my-app/
├── pastoria/                  # Route definitions
│   ├── app.tsx               # Optional root layout
│   ├── environment.ts        # GraphQL environment config
│   ├── page.tsx              # Home page (/)
│   ├── about/
│   │   └── page.tsx          # /about page
│   └── posts/
│       ├── page.tsx          # /posts page
│       └── [id]/
│           └── page.tsx      # /posts/:id dynamic route
├── __generated__/
│   ├── router/               # Generated by pastoria generate
│   └── queries/              # Generated by Relay compiler
├── relay.config.json
├── package.json
└── tsconfig.json
```

## Development Workflow

After creating your project, the typical workflow is:

```bash
# Generate router and Relay artifacts
pnpm generate

# Start the development server
pnpm dev
```

The development server provides hot module reloading and server-side rendering
during development.

## Building for Production

To build your application for production:

```bash
# Build client and server bundles
pnpm build

# Start the production server
pnpm start
```

## Quick Example

Here's a simple page with a GraphQL query:

```tsx
// pastoria/posts/[id]/page.tsx
import {graphql, usePreloadedQuery} from 'react-relay';
import postQuery from '#genfiles/queries/page_PostQuery.graphql';
import type {PageProps} from '#genfiles/router/types';

export const queries = {
  postQuery: postQuery,
};

export default function PostPage({queries}: PageProps<'/posts/[id]'>) {
  const data = usePreloadedQuery(
    graphql`
      query page_PostQuery($id: ID!) @preloadable {
        post(id: $id) {
          title
          content
        }
      }
    `,
    queries.postQuery,
  );

  return (
    <article>
      <h1>{data.post.title}</h1>
      <div>{data.post.content}</div>
    </article>
  );
}
```

**Key concepts:**

- **`page.tsx`** files define routable pages
- **`[id]`** in the path creates a dynamic route parameter
- **`queries`** export defines GraphQL queries to preload
- **`PageProps<'/posts/[id]'>`** provides type-safe props for the route

## Next Steps

- Learn about [filesystem-based routing](./routing/filesystem-routing.md)
- Understand [page components](./routing/pages.md) and the `queries` export
- Explore [nested entry points](./routing/nested-entrypoints.md) for complex
  layouts
- Set up your [GraphQL schema](./graphql/graphql-schema.md)
